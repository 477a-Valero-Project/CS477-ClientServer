<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="0.0.1" author="Martin Borstad">
        <createTable tableName="Records">
            <column name="recordId" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="patientId" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="doctorId" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="filePathRaw" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="filePathProcess" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addAutoIncrement
                tableName="Records"
                columnDataType="int"
                columnName="recordId"
                incrementBy="1"
                ></addAutoIncrement>

    </changeSet>
    <changeSet id="0.0.2" author="Martin Borstad">
    <createTable tableName="Users">
        <column name="id" type="int">
            <constraints primaryKey="true" nullable="false"/>
        </column>
        <column name="password" type="varchar(512)">
            <constraints nullable="true"/>
        </column>
        <column name="name" type="varchar(255)">
            <constraints nullable="true"/>
        </column>
        <column name="override" type="varchar(255)">
            <constraints nullable="true"/>
        </column>
        <column name="role" type="varchar(255)">
            <constraints nullable="true"/>
        </column>
        <column name="groupId" type="int">
            <constraints primaryKey="false" nullable="true"/>
        </column>
        <column name="owner" type="int">
            <constraints primaryKey="false" nullable="true"/>
        </column>
    </createTable>
    <addAutoIncrement
            tableName="Users"
            columnDataType="int"
            columnName="id"
            incrementBy="1"
            ></addAutoIncrement>
        <createTable tableName="Groups">
            <column name="id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="joinCode" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addAutoIncrement
                tableName="Groups"
                columnDataType="int"
                columnName="id"
                incrementBy="1"
                ></addAutoIncrement>

    </changeSet>
    <changeSet id="0.0.3" author="Martin Borstad">
        <createTable tableName="Auth">
            <column name="authId" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="timestamp" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="nonce" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="publicKey" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="accessed" type="timestamp">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addAutoIncrement
                tableName="Auth"
                columnDataType="int"
                columnName="authId"
                incrementBy="1"
                ></addAutoIncrement>
    </changeSet>

</databaseChangeLog>